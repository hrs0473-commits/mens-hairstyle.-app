<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google" content="notranslate">
    <title>MEN'S CUT GUIDE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: sans-serif; overflow-x: hidden; }
        .pro-mode { background-color: white; color: black; display: none; min-height: 100vh; width: 100vw; position: fixed; top: 0; left: 0; z-index: 50; }
        .btn-active { background-color: #22d3ee !important; color: #0f172a !important; font-weight: bold; }
    </style>
</head>
<body class="flex flex-col items-center min-h-screen">
    <div id="main-ui" class="w-full max-w-md p-6">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-black text-cyan-400 tracking-tighter">MEN'S CUT GUIDE</h1>
            <p class="text-xs text-slate-400 mt-1">AI é€£æºãƒ¢ãƒ¼ãƒ‰</p>
        </header>

        <div id="upload-box" class="w-full aspect-[3/4] border-2 border-dashed border-slate-700 rounded-3xl flex flex-col justify-center items-center bg-slate-800/50 overflow-hidden relative shadow-2xl" onclick="document.getElementById('fileInput').click()">
            <div id="placeholder" class="text-center">
                <div class="bg-slate-700 p-4 rounded-full mb-3 inline-block">
                    <span class="text-4xl">ğŸ“·</span>
                </div>
                <p class="text-sm font-bold">å†™çœŸã‚’æ’®å½±ãƒ»é¸æŠ</p>
            </div>
            <img id="preview" class="hidden w-full h-full object-cover">
            <input id="fileInput" type="file" hidden accept="image/*" capture="user" onchange="previewImage(event)">
        </div>

        <div class="mt-8">
            <p class="text-sm font-bold mb-4 text-slate-400 ml-1">ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠã—ã¦AIé€ä¿¡</p>
            <div class="grid grid-cols-2 gap-3">
                <button id="btn-1" onclick="selectStyle(1, 'ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒƒã‚·ãƒ¥', 'ã‚µã‚¤ãƒ‰ã¯6mmã€‚è¥Ÿè¶³ã‚¹ãƒƒã‚­ãƒªã€‚å‰é«ªã¯é‡ã‚ã«ã€‚')" class="bg-slate-800 p-4 rounded-2xl border border-slate-700 text-sm font-bold active:scale-95 transition-all">ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒƒã‚·ãƒ¥</button>
                <button id="btn-2" onclick="selectStyle(2, 'ã‚»ãƒ³ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒˆ', 'å‰é«ªã¯ç›®ã®ä¸‹ã€‚å¾Œã‚ã«æµã‚Œã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰ã‚«ãƒƒãƒˆã€‚')" class="bg-slate-800 p-4 rounded-2xl border border-slate-700 text-sm font-bold active:scale-95 transition-all">ã‚»ãƒ³ã‚¿ãƒ¼ãƒ‘ãƒ¼ãƒˆ</button>
            </div>
        </div>

        <button id="pro-btn" class="hidden w-full mt-8 bg-cyan-500 text-slate-900 p-5 rounded-2xl font-black shadow-lg shadow-cyan-500/20 active:scale-95 transition-all">
            ç¾å®¹å¸«ã«è¦‹ã›ã‚‹å°‚ç”¨ç”»é¢ã¸ â”
        </button>
    </div>

    <div id="pro-ui" class="pro-mode p-6">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-black tracking-tighter">TECHNICAL ORDER SHEET</h2>
            <button onclick="location.reload()" class="text-2xl p-2">âœ•</button>
        </div>
        <div class="flex gap-5 mb-8 bg-slate-100 p-4 rounded-2xl">
            <img id="pro-preview" class="w-32 h-40 object-cover rounded-xl shadow-lg bg-white">
            <div class="flex flex-col justify-center">
                <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest text-left">Desired Style</p>
                <p id="selected-style-name" class="text-2xl font-black"></p>
                <div class="mt-2 bg-black text-white text-[10px] px-2 py-1 rounded inline-block w-fit">AI CONNECTED</div>
            </div>
        </div>
        <div class="space-y-6">
            <section>
                <h3 class="text-xs font-bold text-slate-400 mb-2 border-b border-slate-200 pb-1 uppercase text-left">Instructions</h3>
                <p id="order-text" class="text-md leading-relaxed font-medium text-slate-800 text-left"></p>
            </section>
        </div>
    </div>

    <script>
        // æœ€æ–°ã®URLã«æ›´æ–°æ¸ˆã¿ã§ã™
        const MAKE_URL = "https://hook.us2.make.com/bhajhkquktnfjb2cqbgi1d911e272e52";
https://hook.us2.make.com/bhajhkquktnfjb2cqbgi1d911e272e5
        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                const preview = document.getElementById('preview');
                const proPreview = document.getElementById('pro-preview');
                preview.src = url;
                proPreview.src = url;
                preview.classList.remove('hidden');
                document.getElementById('placeholder').classList.add('hidden');
            }
        }

        async function selectStyle(id, name, order) {
            const file = document.getElementById('fileInput').files[0];
            if (!file) {
                alert("å…ˆã«è‡ªæ’®ã‚Šå†™çœŸã‚’æ’®å½±ã—ã¦ãã ã•ã„ï¼");
                return;
            }

            const proBtn = document.getElementById('pro-btn');
            proBtn.classList.remove('hidden');
            proBtn.disabled = true;
            proBtn.innerHTML = '<span class="animate-spin inline-block mr-2">ğŸŒ€</span> AIã«é€ä¿¡ä¸­...';

            const formData = new FormData();
            formData.append('image', file);
            formData.append('style', name);

            try {
                // Make.comã¸é€ä¿¡
                await fetch(MAKE_URL, {
                    method: 'POST',
                    body: formData
                });

                proBtn.disabled = false;
                proBtn.innerHTML = 'æˆåŠŸï¼ç”»é¢ã‚’è¦‹ã‚‹ â”';
                proBtn.onclick = () => {
                    document.getElementById('main-ui').style.display = 'none';
                    document.getElementById('pro-ui').style.display = 'block';
                    document.getElementById('selected-style-name').innerText = name;
                    document.getElementById('order-text').innerText = order;
                };

            } catch (error) {
                console.error("ã‚¨ãƒ©ãƒ¼:", error);
                proBtn.innerHTML = 'é€ä¿¡ã‚¨ãƒ©ãƒ¼ã€‚é€šä¿¡ç’°å¢ƒã‚’ç¢ºèªã—ã¦ãã ã•ã„';
                proBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
